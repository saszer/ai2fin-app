# Wazuh Indexer Configuration
# OpenSearch configuration for Wazuh Indexer
# Single-node setup for Fly.io

cluster.name: wazuh-cluster
node.name: wazuh-indexer
# Use /var/lib/wazuh-indexer for data (we'll symlink to volume for persistence)
# This avoids permission issues with volume mount
path.data: /var/lib/wazuh-indexer/data
path.logs: /var/log/wazuh-indexer

network.host: 0.0.0.0
http.port: 9200

# Discovery settings for single node
discovery.type: single-node

# Security settings - ENABLED for Dashboard authentication
# Using demo certificates (allowed by OpenSearch for development)
plugins.security.disabled: false
plugins.security.allow_unsafe_democertificates: true
plugins.security.allow_default_init_securityindex: true
plugins.security.check_snapshot_restore_privilege: true
plugins.security.enable_snapshot_restore_privilege: true
plugins.security.ssl.http.enabled: false
plugins.security.ssl.transport.enforce_hostname_verification: false
plugins.security.ssl.transport.resolve_hostname: false
plugins.security.authcz.admin_dn: []
plugins.security.audit.type: internal_opensearch
plugins.security.restapi.roles_enabled: ["all_access", "security_rest_api_access"]
plugins.security.system_indices.enabled: true
plugins.security.system_indices.indices: [".plugins-ml-config", ".plugins-ml-connector", ".plugins-ml-model", ".plugins-ml-task", ".opendistro-alerting-config", ".opendistro-alerting-alert*", ".opendistro-anomaly-detector*", ".opendistro-reports-*", ".opensearch-notifications-*", ".opensearch-notifications-core"]

# Performance settings for Fly.io (4GB RAM)
bootstrap.memory_lock: false
cluster.routing.allocation.disk.threshold_enabled: true

